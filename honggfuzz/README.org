* Honggfuzz

** Git submodule

   This directory contains a few git submodules for Apache, it should
   be set to fetch version 2.4.37 of Apache's httpd, as well as the
   latest versions of ~apr~ and ~apr-util~.

   #+BEGIN_SRC sh
     git pull
     git submodule update --init
   #+END_SRC

   Should get you set up.

   #+BEGIN_SRC sh
     # Go into the apache directory
     cd apache

     # Apply the honggfuzz patch
     patch -p1 < ../hong-apache/httpd-master.honggfuzz.patch

     # Generate the configure script
     ./buildconf

     # I installed apache in ~/fuzzpache
     mkdir -p ~/fuzzpache
     ./configure --prefix=$HOME/fuzzpache
     make
     make install
   #+END_SRC

** Testing Apache

   [[https://github.com/google/honggfuzz/tree/master/examples/apache-httpd][Instructions for fuzzing apache 2.4 with Hongfuzz are here]]


*** Things to be aware of

    *You need to patch Apache's httpd as above*

*** TODO Fuzzing commands

    Should we fuzz both HTTP/1 and HTTP/2, or just one of those? I
    believe the DeepWeb server is starting with HTTP/2?

    *HTTP/1:*

    #+BEGIN_EXAMPLE
      $ honggfuzz/honggfuzz -f corpus_http1 -w ./httpd.wordlist -- ./apache2/bin/httpd -DFOREGROUND -f  /home/$USER/fuzz/apache/apache2/conf/httpd.conf.h1
    #+END_EXAMPLE

    I'm actually using...

    #+BEGIN_SRC sh
      honggfuzz -f hong-apache/corpus_http1 -w hong-apache/httpd.wordlist --persistent -- $HOME/fuzzpache/bin/httpd -DFOREGROUND -f $HOME/fuzzpache/conf/httpd.conf.h1
    #+END_SRC

    *HTTP/2:*

    #+BEGIN_EXAMPLE
      $ honggfuzz/honggfuzz -f corpus_http2 -w ./httpd.wordlist -- ./apache2/bin/httpd -DFOREGROUND -f /home/$USER/fuzz/apache/apache2/conf/httpd.conf.h2
    #+END_EXAMPLE
